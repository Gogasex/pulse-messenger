<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pulse Messenger</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>

  <!-- ========== –≠–ö–†–ê–ù –í–•–û–î–ê ========== -->
  <div id="login-screen" class="screen active">
    <div class="login-container">
      <div class="login-logo">
        <div class="logo-icon">
          <i class="fas fa-bolt"></i>
        </div>
        <h1>Pulse</h1>
        <p>–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è</p>
      </div>

      <form id="login-form" class="login-form">
        <div class="input-group">
          <i class="fas fa-user"></i>
          <input type="text" id="username-input" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                 required minlength="2" maxlength="20" autocomplete="off">
        </div>
        <div class="input-group">
          <i class="fas fa-id-card"></i>
          <input type="text" id="displayname-input" placeholder="–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
                 maxlength="30" autocomplete="off">
        </div>
        <button type="submit" class="btn-primary">
          <i class="fas fa-arrow-right"></i>
          –í–æ–π—Ç–∏ –≤ Pulse
        </button>
      </form>
    </div>
  </div>

  <!-- ========== –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù ========== -->
  <div id="main-screen" class="screen">
    <div class="app-container">

      <!-- –ë–û–ö–û–í–ê–Ø –ü–ê–ù–ï–õ–¨ -->
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="logo-small">
            <i class="fas fa-bolt"></i>
            <span>Pulse</span>
          </div>
          <button class="btn-icon" id="btn-new-group" title="–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É">
            <i class="fas fa-plus"></i>
          </button>
        </div>

        <!-- –ü–æ–∏—Å–∫ -->
        <div class="search-bar">
          <i class="fas fa-search"></i>
          <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π...">
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
        <div class="search-results" id="search-results" style="display: none;">
          <div class="search-results-header">
            <span>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞</span>
            <button class="btn-icon btn-small" id="btn-close-search">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="search-results-list" id="search-results-list">
          </div>
        </div>

        <!-- –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ -->
        <div class="chat-list" id="chat-list">
        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
        <div class="sidebar-footer">
          <div class="user-profile" id="user-profile" onclick="app.showMyProfile()">
            <div class="avatar-small" id="my-avatar" style="cursor:pointer;">
              <i class="fas fa-user"></i>
            </div>
            <div class="user-info">
              <span class="username" id="my-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
              <span class="status-text" id="my-status">–í —Å–µ—Ç–∏</span>
            </div>
          </div>
          <button class="btn-icon" id="btn-settings" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
            <i class="fas fa-cog"></i>
          </button>
        </div>
      </aside>

      <!-- –û–ë–õ–ê–°–¢–¨ –ß–ê–¢–ê -->
      <main class="chat-area">
        <header class="chat-header" id="chat-header">
          <div class="chat-info">
            <div class="avatar-medium" id="chat-avatar">
              <i class="fas fa-comments"></i>
            </div>
            <div>
              <h3 id="chat-name">üí¨ –û–±—â–∏–π —á–∞—Ç</h3>
              <span class="chat-subtitle" id="chat-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</span>
            </div>
          </div>

          <div class="chat-actions">
            <button class="btn-icon" onclick="app.clearChat()" title="–û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç">
              <i class="fas fa-broom"></i>
            </button>
            <button class="btn-icon btn-danger" onclick="app.deleteRoom()" title="–£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É">
              <i class="fas fa-trash"></i>
            </button>
            <button class="btn-icon" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –∑–≤–æ–Ω–æ–∫">
              <i class="fas fa-phone"></i>
            </button>
            <button class="btn-icon" title="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫">
              <i class="fas fa-video"></i>
            </button>
            <button class="btn-icon" title="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
              <i class="fas fa-info-circle"></i>
            </button>
          </div>
        </header>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
        <div class="messages-container" id="messages-container">
          <div class="messages-list" id="messages-list">
          </div>
        </div>

        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏ -->
        <div class="typing-indicator" id="typing-indicator" style="display: none;">
          <div class="typing-dots">
            <span></span><span></span><span></span>
          </div>
          <span class="typing-text" id="typing-text">–ø–µ—á–∞—Ç–∞–µ—Ç...</span>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –≤–≤–æ–¥–∞ -->
        <footer class="message-input-area">
          <div class="reply-preview" id="reply-preview" style="display: none;">
            <div class="reply-content">
              <i class="fas fa-reply"></i>
              <span id="reply-text"></span>
            </div>
            <button class="btn-icon btn-small" id="btn-cancel-reply">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="input-row">
            <button class="btn-icon" id="btn-attach" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
              <i class="fas fa-paperclip"></i>
            </button>
            <input type="file" id="file-input" hidden multiple>

            <!-- –ö–Ω–æ–ø–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è -->
            <button class="btn-icon" id="btn-voice" title="–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
              <i class="fas fa-microphone"></i>
            </button>

            <div class="message-input-wrapper">
              <textarea id="message-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                        rows="1" maxlength="5000"></textarea>
            </div>

            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–∞ -->
            <div class="voice-recording" id="voice-recording" style="display: none;">
              <div class="recording-dot"></div>
              <span class="recording-time" id="recording-time">0:00</span>
              <button class="btn-icon btn-danger" id="btn-cancel-voice" title="–û—Ç–º–µ–Ω–∏—Ç—å">
                <i class="fas fa-times"></i>
              </button>
              <button class="btn-icon btn-success" id="btn-send-voice" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
                <i class="fas fa-check"></i>
              </button>
            </div>

            <div class="sound-selector" id="sound-selector">
              <button class="btn-icon btn-sound" id="btn-sound" title="–í—ã–±—Ä–∞—Ç—å –∑–≤—É–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏">
                <i class="fas fa-music"></i>
              </button>
              <div class="sound-dropdown" id="sound-dropdown">
                <div class="sound-dropdown-header">
                  <i class="fas fa-music"></i> –ó–≤—É–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
                </div>
                <div class="sound-option active" data-sound="default">
                  <i class="fas fa-bell"></i>
                  <span>–û–±—ã—á–Ω—ã–π</span>
                  <button class="btn-play" data-sound="default"><i class="fas fa-play"></i></button>
                </div>
                <div class="sound-option" data-sound="birthday">
                  <i class="fas fa-birthday-cake"></i>
                  <span>–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è üéÇ</span>
                  <button class="btn-play" data-sound="birthday"><i class="fas fa-play"></i></button>
                </div>
                <div class="sound-option" data-sound="funny">
                  <i class="fas fa-laugh-squint"></i>
                  <span>–°–º–µ—à–Ω–æ–π üòÇ</span>
                  <button class="btn-play" data-sound="funny"><i class="fas fa-play"></i></button>
                </div>
                <div class="sound-option" data-sound="urgent">
                  <i class="fas fa-exclamation-triangle"></i>
                  <span>–°—Ä–æ—á–Ω–æ! üö®</span>
                  <button class="btn-play" data-sound="urgent"><i class="fas fa-play"></i></button>
                </div>
                <div class="sound-option" data-sound="romantic">
                  <i class="fas fa-heart"></i>
                  <span>–†–æ–º–∞–Ω—Ç–∏–∫–∞ ‚ù§Ô∏è</span>
                  <button class="btn-play" data-sound="romantic"><i class="fas fa-play"></i></button>
                </div>
                <div class="sound-option" data-sound="applause">
                  <i class="fas fa-hands-clapping"></i>
                  <span>–ê–ø–ª–æ–¥–∏—Å–º–µ–Ω—Ç—ã üëè</span>
                  <button class="btn-play" data-sound="applause"><i class="fas fa-play"></i></button>
                </div>
                <div class="sound-option" data-sound="none">
                  <i class="fas fa-volume-mute"></i>
                  <span>–ë–µ–∑ –∑–≤—É–∫–∞ üîá</span>
                  <button class="btn-play" data-sound="none"><i class="fas fa-play"></i></button>
                </div>
              </div>
            </div>

            <button class="btn-icon" id="btn-emoji" title="–≠–º–æ–¥–∑–∏">
              <i class="fas fa-smile"></i>
            </button>

            <div class="emoji-picker" id="emoji-picker" style="display: none;">
              <div class="emoji-grid">
              </div>
            </div>

            <button class="btn-send" id="btn-send" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </footer>
      </main>

      <!-- –ü–ê–ù–ï–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô -->
      <aside class="users-panel" id="users-panel">
        <div class="panel-header">
          <h3>üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
        </div>
        <div class="users-list" id="users-list">
        </div>
      </aside>
    </div>
  </div>

  <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ì–†–£–ü–ü–´ -->
  <div class="modal" id="modal-new-group" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-users"></i> –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</h3>
        <button class="btn-icon" id="btn-close-modal">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="input-group">
          <i class="fas fa-edit"></i>
          <input type="text" id="group-name-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã">
        </div>
        <p class="modal-hint">–í—ã–±–µ—Ä–∏—Ç–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:</p>
        <div class="members-select" id="members-select">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" id="btn-cancel-group">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" id="btn-create-group">–°–æ–∑–¥–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–§–ò–õ–Ø -->
  <div class="modal" id="modal-profile" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-user-circle"></i> –ü—Ä–æ—Ñ–∏–ª—å</h3>
        <button class="btn-icon" onclick="document.getElementById('modal-profile').style.display='none'">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body profile-modal-body">
        <div class="profile-avatar-large" id="profile-avatar-large">
          A
        </div>
        <div class="profile-color-picker">
          <span class="color-dot" style="background:#6c5ce7" onclick="app.setAvatarColor('#6c5ce7')"></span>
          <span class="color-dot" style="background:#00cec9" onclick="app.setAvatarColor('#00cec9')"></span>
          <span class="color-dot" style="background:#e17055" onclick="app.setAvatarColor('#e17055')"></span>
          <span class="color-dot" style="background:#00b894" onclick="app.setAvatarColor('#00b894')"></span>
          <span class="color-dot" style="background:#fdcb6e" onclick="app.setAvatarColor('#fdcb6e')"></span>
          <span class="color-dot" style="background:#ff7675" onclick="app.setAvatarColor('#ff7675')"></span>
          <span class="color-dot" style="background:#a29bfe" onclick="app.setAvatarColor('#a29bfe')"></span>
          <span class="color-dot" style="background:#fd79a8" onclick="app.setAvatarColor('#fd79a8')"></span>
          <span class="color-dot" style="background:#74b9ff" onclick="app.setAvatarColor('#74b9ff')"></span>
          <span class="color-dot" style="background:#55efc4" onclick="app.setAvatarColor('#55efc4')"></span>
        </div>
        <div class="input-group">
          <i class="fas fa-user"></i>
          <input type="text" id="profile-displayname" placeholder="–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è">
        </div>
        <div class="input-group">
          <i class="fas fa-comment"></i>
          <input type="text" id="profile-status" placeholder="–°—Ç–∞—Ç—É—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ù–∞ —Ä–∞–±–æ—Ç–µ üíº)">
        </div>
        <div class="input-group">
          <i class="fas fa-info-circle"></i>
          <input type="text" id="profile-bio" placeholder="–û —Å–µ–±–µ" maxlength="150">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" onclick="document.getElementById('modal-profile').style.display='none'">–û—Ç–º–µ–Ω–∞</button>
        <button class="btn-primary" onclick="app.saveProfile()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–†–û–°–ú–û–¢–†–ê –ü–†–û–§–ò–õ–Ø -->
  <div class="modal" id="modal-view-profile" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3><i class="fas fa-user"></i> –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
        <button class="btn-icon" onclick="document.getElementById('modal-view-profile').style.display='none'">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body profile-modal-body">
        <div class="profile-avatar-large" id="view-profile-avatar">?</div>
        <h2 id="view-profile-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
        <p class="profile-username" id="view-profile-username">@username</p>
        <p class="profile-bio-text" id="view-profile-bio">-</p>
        <div class="profile-info-row">
          <i class="fas fa-circle" style="color: var(--success); font-size: 8px;"></i>
          <span id="view-profile-status">–í —Å–µ—Ç–∏</span>
        </div>
        <div class="profile-info-row">
          <i class="fas fa-calendar"></i>
          <span id="view-profile-joined">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è: ‚Äî</span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-primary" id="btn-dm-from-profile" onclick="document.getElementById('modal-view-profile').style.display='none'">
          <i class="fas fa-comment"></i> –ù–∞–ø–∏—Å–∞—Ç—å
        </button>
      </div>
    </div>
  </div>

  <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–ï -->
  <div class="sound-notification" id="sound-notification" style="display: none;">
    <div class="sound-notif-content">
      <i class="fas fa-music"></i>
      <span id="sound-notif-text">üéÇ –ü—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!</span>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.4/socket.io.min.js"></script>
  <script src="app.js"></script>
</body>
</html>